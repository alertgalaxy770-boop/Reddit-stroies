const generateBtn = document.getElementById("generateBtn");
const storyInput = document.getElementById("storyInput");
const voiceSelect = document.getElementById("voiceSelect");
const audioContainer = document.getElementById("audioContainer");
const audioPlayer = document.getElementById("audioPlayer");

// Function to populate voices once available
function populateVoices() {
  const voices = speechSynthesis.getVoices();
  voiceSelect.innerHTML = "";
  voices.forEach((v) => {
    // only add English voices
    if (v.lang.startsWith("en")) {
      const option = document.createElement("option");
      option.value = v.name;
      option.textContent = `${v.name} (${v.lang})`;
      voiceSelect.appendChild(option);
    }
  });
}

// Some browsers need this event to know when voices are ready
speechSynthesis.onvoiceschanged = populateVoices;

// Generate narration
generateBtn.addEventListener("click", () => {
  const text = storyInput.value.trim();
  const selectedVoice = voiceSelect.value;

  if (!text) {
    alert("Please enter a story!");
    return;
  }

  const utterance = new SpeechSynthesisUtterance(text);
  const voice = speechSynthesis.getVoices().find(v => v.name === selectedVoice);
  if (voice) utterance.voice = voice;

  speechSynthesis.speak(utterance);

  // Show audio container (placeholder)
  audioContainer.classList.remove("hidden");
});


audioPlayer.src = "";
audioPlayer.pause();

